<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menstrual Cycle Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Add some basic styling to our calendar */
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
        }
        .day {
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
            color: #000;
        }
        .day:hover {
            background-color: #ccc;
        }
        .selected {
            background-color: #aaa;
        }
        .arrow-button {
            cursor: pointer;
            font-size: 24px;
            font-weight: bold;
            color: #000;
        }
        body {
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <h1 class="text-3xl text-center p-4" style="color: #000;">Menstrual Cycle Tracker</h1>
    <div class="flex justify-between p-4">
        <div class="arrow-button" id="prev-month" style="color: #000;">&#60;</div>
        <div id="month-year" style="color: #000;"></div>
        <div class="arrow-button" id="next-month" style="color: #000;">&#62;</div>
    </div>
    <div class="calendar" id="calendar"></div>
    <div class="p-4">
        <label for="cycle-length" class="block text-sm font-medium text-gray-700">Average Cycle Length (days):</label>
        <input type="number" id="cycle-length" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" required>
    </div>
    <button id="generate-button" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" style="margin-top: 20px;">Generate</button>
    <textarea id="menstrual-cycle-info" class="w-full p-4 mt-4" placeholder="Menstrual cycle info will appear here" readonly style="color: #000;"></textarea>
    <textarea id="period-length-info" class="w-full p-4 mt-4" placeholder="Period length info will appear here" readonly style="color: #000;"></textarea>
    <textarea id="hormone-info" class="w-full p-4 mt-4" placeholder="Hormone info will appear here" readonly style="color: #000;"></textarea>

    <script>
        // Get the calendar element
        const calendar = document.getElementById('calendar');
        const prevMonthButton = document.getElementById('prev-month');
        const nextMonthButton = document.getElementById('next-month');
        const monthYearDisplay = document.getElementById('month-year');
        const generateButton = document.getElementById('generate-button');
        const cycleLengthInput = document.getElementById('cycle-length');
        const menstrualCycleInfoTextarea = document.getElementById('menstrual-cycle-info');
        const periodLengthInfoTextarea = document.getElementById('period-length-info');
        const hormoneInfoTextarea = document.getElementById('hormone-info');

        // Create a 2D array to represent the calendar
        let days = [];
        let currentDate = new Date();

        // Function to render the calendar
        function renderCalendar() {
            // Clear the calendar
            calendar.innerHTML = '';

            // Get the first day of the month
            const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);

            // Get the last day of the month
            const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);

            // Get the day of the week of the first day
            const firstDayOfWeek = firstDay.getDay();

            // Create a 2D array to represent the calendar
            days = [];
            let week = [];
            for (let i = 0; i < firstDayOfWeek; i++) {
                week.push(null);
            }
            for (let i = 1; i <= lastDay.getDate(); i++) {
                const day = new Date(currentDate.getFullYear(), currentDate.getMonth(), i);
                week.push({
                    date: day,
                    selected: false,
                    element: null
                });
                if (week.length === 7) {
                    days.push(week);
                    week = [];
                }
            }
            if (week.length > 0) {
                while (week.length < 7) {
                    week.push(null);
                }
                days.push(week);
            }

            // Render the calendar
            days.forEach(week => {
                week.forEach(day => {
                    if (day) {
                        const dayElement = document.createElement('div');
                        dayElement.classList.add('day');
                        dayElement.textContent = day.date.getDate();
                        day.element = dayElement;
                        dayElement.addEventListener('click', () => {
                            // Toggle the day selection
                            day.selected = !day.selected;
                            if (day.selected) {
                                dayElement.classList.add('selected');
                            } else {
                                dayElement.classList.remove('selected');
                            }
                        });
                        calendar.appendChild(dayElement);
                    } else {
                        const emptyDay = document.createElement('div');
                        emptyDay.classList.add('day');
                        calendar.appendChild(emptyDay);
                    }
                });
            });

            // Update the month and year display
            monthYearDisplay.textContent = currentDate.toLocaleString('default', { month: 'long' }) + ' ' + currentDate.getFullYear();
        }

        // Generate menstrual cycle info
        function generateMenstrualCycleInfo() {
            const selectedDays = days.flat().filter(day => day && day.selected);
            if (selectedDays.length === 0) {
                menstrualCycleInfoTextarea.value = '';
                periodLengthInfoTextarea.value = '';
                hormoneInfoTextarea.value = '';
                return;
            }

            const firstDay = selectedDays[0].date;
            const lastDay = selectedDays[selectedDays.length - 1].date;
            const periodLength = Math.floor((lastDay - firstDay) / (1000 * 60 * 60 * 24)) + 1;

            const today = new Date();
            const cycleDay = Math.floor((today - firstDay) / (1000 * 60 * 60 * 24)) + 1;

            let phase;
            if (cycleDay <= 5) {
                phase = 'Menstruation';
            } else if (cycleDay <= 14) {
                phase = 'Follicular phase';
            } else if (cycleDay <= 21) {
                phase = 'Ovulation';
            } else {
                phase = 'Luteal phase';
            }

            const cycleLength = parseInt(cycleLengthInput.value);
            if (isNaN(cycleLength)) {
                menstrualCycleInfoTextarea.value = 'Please enter a valid cycle length.';
                return;
            }

            menstrualCycleInfoTextarea.value = `You are on day ${cycleDay} of your menstrual cycle. You are currently in the ${phase}. Your average cycle length is ${cycleLength} days.`;
            periodLengthInfoTextarea.value = `Your period lasted for ${periodLength} days.`;

            if (phase === 'Menstruation') {
                hormoneInfoTextarea.value = 'During menstruation, your estrogen and progesterone levels are at their lowest. Your body is shedding the lining of the uterus, and you may experience symptoms such as cramping, bloating, and mood swings.';
            } else if (phase === 'Follicular phase') {
                hormoneInfoTextarea.value = 'During the follicular phase, your estrogen levels are increasing, causing the follicles in your ovaries to grow and mature. You may experience symptoms such as increased energy, improved mood, and a sense of well-being.';
            } else if (phase === 'Ovulation') {
                hormoneInfoTextarea.value = 'During ovulation, your estrogen levels peak, causing the release of an egg from the ovary. You may experience symptoms such as increased libido, improved mood, and a sense of confidence.';
            } else {
                hormoneInfoTextarea.value = 'During the luteal phase, your progesterone levels are increasing, causing the uterine lining to thicken and prepare for a potential pregnancy. You may experience symptoms such as breast tenderness, mood swings, and fatigue.';
            }
        }

        // Add event listeners to the arrow buttons
        prevMonthButton.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        });
        nextMonthButton.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        });

        // Add event listener to the generate button
        generateButton.addEventListener('click', generateMenstrualCycleInfo);

        // Render the calendar for the first time
        renderCalendar();
    </script>
</body>
</html>